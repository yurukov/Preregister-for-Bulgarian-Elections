<IfModule mod_mime.c>
  <FilesMatch "(\.js\.gz|\.json\.gz)$">
    ForceType 'text/javascript; charset=UTF-8'
    FileETag None
  </FilesMatch>
  AddEncoding gzip .gz
  AddType text/javascript .gz

  <FilesMatch "\.css\.gz$">
    ForceType text/css
    FileETag None
  </FilesMatch>
  AddEncoding gzip .gz
  AddType text/css .gz

  <FilesMatch "\.html\.gz$">
    ForceType 'text/html; charset=UTF-8'
    FileETag None
  </FilesMatch>
  AddEncoding gzip .gz
  AddType text/html .gz

  <FilesMatch "(\.jpg|\.jpeg|\.gif|\.png)$">
    FileETag None
  </FilesMatch>

</IfModule>
<IfModule mod_deflate.c>
  SetEnvIfNoCase Request_URI \.gz$ no-gzip
</IfModule>
<IfModule mod_headers.c>
  Header set Vary "Accept-Encoding, Cookie"
  Header set Cache-Control 'max-age=300, must-revalidate'
</IfModule>
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/javascript "modification plus 2 hours"
  ExpiresByType text/css "modification plus 2 weeks"
  ExpiresByType text/html "modification plus 2 weeks"
  ExpiresByType image/jpeg "modification plus 2 year"
  ExpiresByType image/png "modification plus 2 year"
  ExpiresByType image/gif "modification plus 2 year"
</IfModule>

AddDefaultCharset UTF-8

<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine On

RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteRule (.*)(\.js|\.json|\.css|\.html)$ $1$2\.gz [L]
</IfModule>
